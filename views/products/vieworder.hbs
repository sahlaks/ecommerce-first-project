
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>
     <style>
        /* General styles */
body {
   font-family: "Josefin Sans",sans-serif;;
    margin: 0;
    padding: 0;
}

.container {
    display: flex; /* Added */
}

/* Main content styles */
main {
    flex: 1;
    padding: 20px;
}

h1 {
    color: #333;
    font-size: 24px;
    margin-bottom: 20px;
}

.ul li{
    width: 90%;
    height: 35px;
   
    display: flex;
    align-items: center;

    
}
.ul li a{
    text-decoration: none;
    margin-left: 10%;
    font-size: 2.1rem;
    color:grey;
    
}
.sidebar{
    width: 18%;
    background-color: #FBD2E0;
    margin-top: 20px;
    margin-left: 20px;
}
.ul li:hover{
    background-color:white;
    margin-left: 10px;
}
.ul p{
    margin-left: 10px;
}

@media (max-width:890px){
    .names{
        display: none;
    }
    .heading{
        display:none;
    }
}


.btn{
    background:#ffc107;
}

.size{
    font-size: 1.6rem;
    width: 40%;
}

  

    .order-container {
            border: 1px solid #ccc;
            padding: 20px;
            margin-bottom: 20px;
            width:60%;
            font-size: 1.6rem;
        }
 
 .order-container-summary {
            border: 1px solid #ccc;
            padding: 20px;
            margin-bottom: 20px;
            width:35%;
            font-size: 1.6rem;
        }
 .order-container-address {
            font-size: 1.6rem;
            padding: 20px;
            margin-bottom: 20px;
        
        }
.order-container-address p{
    line-height: 5px;
}
        .heading p{
            line-height: 10px;
        }
        .order-container-address p{
            
        }
.information-container{
    display: flex;
    justify-content:space-around;
    }

    #progressbar {
    margin-bottom: 30px;
    overflow: hidden;
    color: #455A64;
    padding-left: 0px;
    margin-top: 30px
}

#progressbar li {
    list-style-type: none;
    font-size: 13px;
    width: 20%;
    float: left;
    position: relative;
    font-weight: 400;
    color: #455A64 !important;
    
}

#progressbar #step1:before {
    content: "1";
    color: #fff;
    width: 29px;
    margin-left: 15px !important;
    padding-left: 11px !important;
}


#progressbar #step2:before {
    content: "2";
    color: #fff;
    width: 29px;

}

#progressbar #step3:before {
    content: "3";
    color: #fff;
    width: 29px;
    margin-right: 15px !important;
    padding-right: 11px !important;
}
#progressbar #step4:before {
    content: "4";
    color: #fff;
    width: 29px;
    margin-right: 15px !important;
    padding-right: 11px !important;
}

#progressbar li:before {
    line-height: 29px;
    display: block;
    font-size: 12px;
    background: #455A64 ;
    border-radius: 50%;
    margin: auto;
}

 #progressbar li:after {
    content: '';
    width: 121%;
    height: 2px;
    background: #455A64;
    position: absolute;
    left: 0%;
    right: 0%;
    top: 15px;
    z-index: -1;
} 

#progressbar li:nth-child(2):after {
    left: 50%;
}

#progressbar li:nth-child(1):after {
    left: 25%;
    width: 121%;
}
#progressbar li:nth-child(3):after {
    left: 25% !important;
    width: 50% !important;
}


#progressbar li.active:before,
#progressbar li.active:after {
    background: #4bb8a9; 
}


</style>



<div class="main" style="display: flex; flex-direction: row;">
<div class="sidebar">
    <ul class="ul">
            <p class="heading">Hello,<br>{{username}}</p>
            <p>Account Settings</p>
            <li> <a href="/profile"><svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></a><a href="/profile" class="names">My Information</a></li>
            <br>
            <li> <a href="/address"><svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M384 48c8.8 0 16 7.2 16 16V448c0 8.8-7.2 16-16 16H96c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16H384zM96 0C60.7 0 32 28.7 32 64V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H96zM240 256a64 64 0 1 0 0-128 64 64 0 1 0 0 128zm-32 32c-44.2 0-80 35.8-80 80c0 8.8 7.2 16 16 16H336c8.8 0 16-7.2 16-16c0-44.2-35.8-80-80-80H208zM512 80c0-8.8-7.2-16-16-16s-16 7.2-16 16v64c0 8.8 7.2 16 16 16s16-7.2 16-16V80zM496 192c-8.8 0-16 7.2-16 16v64c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm16 144c0-8.8-7.2-16-16-16s-16 7.2-16 16v64c0 8.8 7.2 16 16 16s16-7.2 16-16V336z"/></svg></a><a href="/address" class="names">Addresses</a></li>
            <br>
            <hr>
            <li> <a href="/vieworder"><svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M448 160H320V128H448v32zM48 64C21.5 64 0 85.5 0 112v64c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zM448 352v32H192V352H448zM48 288c-26.5 0-48 21.5-48 48v64c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V336c0-26.5-21.5-48-48-48H48z"/></svg></a> <a href="/vieworder" class="names">My Orders</a></li>
            <br>
            <li> <a href="/getcoupon"><svg xmlns="http://www.w3.org/2000/svg" height="16" width="18" viewBox="0 0 576 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M64 64C28.7 64 0 92.7 0 128v64c0 8.8 7.4 15.7 15.7 18.6C34.5 217.1 48 235 48 256s-13.5 38.9-32.3 45.4C7.4 304.3 0 311.2 0 320v64c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V320c0-8.8-7.4-15.7-15.7-18.6C541.5 294.9 528 277 528 256s13.5-38.9 32.3-45.4c8.3-2.9 15.7-9.8 15.7-18.6V128c0-35.3-28.7-64-64-64H64zm64 112l0 160c0 8.8 7.2 16 16 16H432c8.8 0 16-7.2 16-16V176c0-8.8-7.2-16-16-16H144c-8.8 0-16 7.2-16 16zM96 160c0-17.7 14.3-32 32-32H448c17.7 0 32 14.3 32 32V352c0 17.7-14.3 32-32 32H128c-17.7 0-32-14.3-32-32V160z"/></svg></a><a href="/getcoupon" class="names">My Coupons</a></li>
            
            <br>
            <li> <a href="/wallet"><svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V192c0-35.3-28.7-64-64-64H80c-8.8 0-16-7.2-16-16s7.2-16 16-16H448c17.7 0 32-14.3 32-32s-14.3-32-32-32H64zM416 272a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg></a><a href="/wallet" class="names">My Wallet</a></li>
            <br>
            <li> <a href="/wishlistview"><svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z"/></svg></a><a href="/wishlistview" class="names">My Wishlist</a></li>
            <br>
            <li><a href="/changepwd"><svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"/></svg></a><a href="/changepwd" style="font-size:1.95rem;">Change Password</a></li>
            <hr>
            
            <li><a href="/signout"><svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 192 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l210.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128zM160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 32C43 32 0 75 0 128L0 384c0 53 43 96 96 96l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l64 0z"/></svg></a><a href="/admin/logout" class="names">Logout</a></li>
            <br>
        </ul>
    </div>

       <main>
        <h1>Order Details</h1>
        {{#if msg}} <span class="text-danger" style="font-size: 1.6rem;">{{msg}}</span> {{/if}}
        <div class="row px-3" style="display: flex; flex-direction: row;">
            <div class="col">
                <ul id="progressbar" >
                    <li class="step0 active " id="step1">PLACED</li>
                    <li class="step0 active text-center" id="step2">SHIPPED</li>
                    <li class="step0  active text-right" id="step3">DELIVERED</li>
                </ul>
            </div>
        </div>
         {{#each combinedOrders}}
         <div class="information-container">
         <div class="order-container-address">
             <h3><strong>Billing Information</strong></h2>
            <p style="line-height: 10px;"><strong> <span>{{fname}} {{sname}} </span></strong></p>
            <p style="line-height: 15px;"><span>{{address}},{{locality}}, {{district}},{{pincode}} </span> </p>
            <p style="line-height: 0.5px;"> <span>mob: {{mobilenumber}} </span></p>
         </div>

         <div class="order-container-address">
             <h3><strong>Shipping Information</strong></h3>
            <p><strong> <span>Payment Type: </span></strong></p>
            <p style="line-height: 1px;" id="option"><span>{{paymentoption}} </span> </p>
         </div>

         <div class="order-container-address">
            <h3><strong >Order Status: <span id="orderStatus" style="color: {{getStatusColor this.status}}"> <span id="status">{{status}}</span></span></strong>
            </h3>
        </div>
            
           <div class="order-container-address" style="display: flex;">
            <span id="changeStatus"></span>
            <a href="/invoice?cid={{cartid}}" id="invoice" class="btn" style="height: 30px;width:100%;margin-left: 10px;">Invoice Download</a>
            </div>
        </div>

        <div class="container-fluid">
        <div class="information-container">
        <div class="order-container">
        <table class="table table-striped" id="productsTable" class="display">
        <thead>
         <tr>
            <th scope="col">Item</th>
            <th scope="col">Quantity</th>
            <th scope="col">Price</th>
            <th scope="col">Total</th>
         </tr>
        </thead>
        <tbody>
           
            <h3>Items from order: <span id="cartid">{{cartid}} </span></h3>
            
            <tr>
                {{#each products}}
                <td>
                    <img src="/images/{{image}}"  alt="Product image" style="max-width: 40px;"> <span>
                {{productname}} </span>
                </td>
                <td><span>{{quantity}}</span></td>
                <td><span>{{price}}</span></td>
                <td><span>{{subtotalprod}}</span></td>
            </tr>
                 {{/each}}
        </tbody>
        </table>
        </div>
        <div class="order-container-summary">
            <h3>Order Summary</h3>
            <table class="table table-striped" id="productsTable" class="display">
        <thead>
         <tr>
            <th scope="col">Description</th>
            <th scope="col">Price</th>
         </tr>
        </thead>
        <tbody>
           

            <tr>
                <td><span>Sub Total</span></td>
                <td><span>{{subtotal}}</span></td>
            </tr>
            <tr>
                <td><span>Shipping Charge:</span></td>
                <td><span>0</span></td>
            </tr>
            <tr>
                
                <td><span>Discount:</span></td>
                <td><span>{{discount}}</span></td>
            </tr>
            {{#each appliedCoupons}}
                <tr>
                    <td><span>Coupon Disount:</span></td>
                    <td><span>{{this.discount}} off</span></td>
                 </tr>
            {{/each}}
            <tr>
                <td> <strong><span>Total:</span></strong></td>
                <td><strong> <span>{{total}}</span> </strong></td>
            </tr>
        </tbody>
        </table>

        </div>
        </div>
        </div>
       {{/each}}
       
    <div class="col-lg-12">
    <div class="confirmation_tittle">
    <form action="/razpay/callback?orderid={{orderId}}" method="POST" style="font-size: 1.6rem;" id="payment">
    <input type="hidden" name="razorpay_order_id" value="{{ razorpayOrder.id }}">
    <script src="https://checkout.razorpay.com/v1/checkout.js"
          data-key="{{ keyId }}"
          data-amount="{{ razorpayOrder.amount }}"
          data-currency="INR"
          data-order_id="{{ razorpayOrder.id }}"
          data-buttontext="Pay with Razorpay"
          data-name="{{formData.fname}}"
          data-description="Purchase Description"
          data-image="your_logo_url"
          data-prefill.name="{{ fname }}"
          data-prefill.email="{{ email }}"
          data-theme.color="#F37254">
    </script>
</form>
</div>
</div>

 

    </main>
</div>
<script>
let status =document.getElementById("status").innerHTML
let cartid =document.getElementById("cartid").innerHTML
let payment = document.getElementById("option").innerHTML
//console.log(cartid)
if(status=='Delivered'){
    document.getElementById("changeStatus").innerHTML = ` <a href="/returnorder?oid=${cartid}" class="btn" style="background-color: green;color: white;">Return</a>`
    document.getElementById('payment').style.display = 'none';
}
if(status=='Placed'||status=='Shipped'){
    document.getElementById("changeStatus").innerHTML = ` <a href="/cancelorder?oid=${cartid}" class="btn" style="background-color: green;color: white;">Cancel</a>`
    document.getElementById('payment').style.display = 'none';
    //document.getElementById('invoice').style.display = 'none';
}
if(status == 'Pending' || status == 'Cancelled'){
    document.getElementById('invoice').style.display = 'none';
}
if((status=='Placed'||status=='Shipped') && (payment=='Razorpay')){
     document.getElementById('invoice').style.display = 'block';
}
</script>
</body>
</html>
